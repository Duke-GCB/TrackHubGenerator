# TrackHubGenerator
Python, [CWL] and Make tools for generating UCSC Track Hubs. These can be added as custom data to both the [UCSC Genome Browser] and the [Ensembl browser].

The trackhub data generated can be found on [GCB's trackhub server].

[CWL]: https://commonwl.org
[UCSC Genome Browser]: http://genome.ucsc.edu/cgi-bin/hgHubConnect
[Ensembl browser]: http://www.ensembl.org/
[GCB's trackhub server]: http://trackhub.genome.duke.edu/tf-dna-binding-predictions/
[BedGraph format]: https://genome.ucsc.edu/goldenpath/help/bedgraph.html

## Usage

This tool is designed to operate on directories of bed files, generated by [SVR_models](https://github.com/Duke-GCB/SVR_models). The bed files generated will be specific to a TF (e.g. E2F1 or E2F4) and a genome assembly (e.g. hg19 or hg38).

First, the [bigbed-workflow.cwl](cwl/bigbed-workflow.cwl) workflow should be used to combine and convert the bed files into bigbed (.bb) files. Doing so requires [CWL]. A JSON job order file like [bigbed-workflow-test.json](cwl/bigbed-workflow-test.json) is recommended:

    $ export PATH=$PATH:/abspath/TrackHubGenerator/cwl/bin
    $ cwltool --outdir desired-output-dir bigbed-workflow.cwl job.json

This workflow produces a bigbed files as prescribed by the JSON.

To build the track hub directory, run `make`, specifying the path to the data directory (containing .bb files) as well as the desired output directory:

      make HUBROOT=/path/to/trackhub DATA=/path/to/data
